<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta name="copyright" content="Copyright (c) 2007-2009 Innoopract Informationssysteme GmbH. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page." >
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>Launching RAP Applications</title>
  <link rel="stylesheet" href="../../../../PRODUCT_PLUGIN/book.css" charset="UTF-8" type="text/css">
</head>
<body>
  
  <h1>Launching RAP Applications</h1>
  
  <p>To start your RAP application, select <em>Open Run Dialog...</em> 
    from the <em>Run</em> menu. You need to create a <em>New Launch 
    configuration</em>. You can either use the <a href="#rap">RAP Launcher</a>
    or the <a href="#equinox">Equinox Launcher</a>. 
  </p>
  
  <h3>Required plug-ins</h3>  
  <p>
    Regardless which way to launch you choose ensure that the following 
    plug-ins are activated:
  </p>
  <ul>
    <li>com.ibm.icu.base</li>  
    <li>javax.servlet</li>
    <li>org.apache.commons.logging</li>  
    <li>org.eclipse.core.commands</li>
    <li>org.eclipse.core.contenttype</li>
    <li>org.eclipse.core.databinding</li>
    <li>org.eclipse.core.databinding.beans</li>
    <li>org.eclipse.core.databinding.observable</li>
    <li>org.eclipse.core.databinding.property</li>
    <li>org.eclipse.core.expressions</li>
    <li>org.eclipse.core.jobs</li>
    <li>org.eclipse.core.runtime</li>
    <li>org.eclipse.equinox.app</li>
    <li>org.eclipse.equinox.common</li>
    <li>org.eclipse.equinox.http.jetty</li>
    <li>org.eclipse.equinox.http.registry</li>
    <li>org.eclipse.equinox.http.servlet</li>
    <li>org.eclipse.equinox.preferences</li>
    <li>org.eclipse.equinox.registry</li>
    <li>org.eclipse.help</li>
    <li>org.eclipse.osgi</li>
    <li>org.eclipse.osgi.services</li>
    <li>org.eclipse.rap.demo</li>
    <li>org.eclipse.rap.jface</li>
    <li>org.eclipse.rap.jface.databinding</li>
    <li>org.eclipse.rap.rwt</li>
    <li>org.eclipse.rap.rwt.q07</li>
    <li>org.eclipse.rap.ui</li>
    <li>org.eclipse.rap.ui.forms</li>
    <li>org.eclipse.rap.ui.views</li>
    <li>org.eclipse.rap.ui.workbench</li>
    <li>org.mortbay.jetty.util</li>
    <li>org.mortbay.jetty.server</li>
  </ul>
  
  <h3>web.xml</h3>
  <p>
    Currently it is not possible to specify a <code>web.xml</code> to be used
    by the servlet engine. Some of the settings that usually would be specified 
    in the <code>web.xml</code>, can be passed to the Equinox HTTP Service via 
    system properties.
  </p>
  
  <h3>Servlet engine log</h3>
  <p>
    By default the servlet engine (namely Jetty) is configured to suppress most logging 
    information. This can be changed by adding the VM argument
    <code>-Dorg.eclipse.equinox.http.jetty.log.stderr.threshold=&lt;log level&gt;</code> 
    to the launch configuration. Valid log levels are <code>debug</code>, 
    <code>info</code>, <code>warn</code>, <code>error</code>, and <code>off</code>.
    The default value is <code>warn</code>.
  </p>

  <a name="rap"><h2>Using the RAP Launcher</h2></a>

  <p>
    The RAP Launcher is based on the 
    <a href="/help/topic/org.eclipse.pde.doc.user/guide/tools/launchers/equinox_launcher.htm">OSGi Launcher</a>
    and adds a <em>Main</em> tab page to it.
    Please note, that the RAP Launcher only works when the Equinox OSGi Framework is selected,
    which is the default setting on page <em>Bundles</em>.
  </p>
    
  <img src="../../images/launcher.png" />
    
  <h3>Servlet and Entry Point/Application to Run</h3>
  <p>
     Within this group you need to choose the combination of servlet name and 
     entry point/application you would like to run.
  </p>
  
   <p>
     When the <em>Browseâ€¦</em> button is pressed, a selection dialog opens.
     This dialog lists all servlet names and entry points/applications available in the workspace.
     Open the drop down menu item in the top right corner and select <em>Include Target 
     Platform</em> if you also want to see the servlet names and entry points/applications available 
     in your target platform.
    The RAP Launcher will display an error in case the selected servlet name, entry point or
    application is not contained in the selection on the <em>Bundles</em> page.
  </p>
  
  <p>When the <em>Terminate possible running previous launch</em>
  option is selected, an eventually running launch with the same name 
  will be terminated before lauching. This might come in handy when frequently
  changing code and restarting the application.</p>
  
  <h3>Browser</h3>
  Controls whether the application should be opened with the internal browser
  in the editor area or with an external browser or if no browser should be 
  opened.
  The outcome depends on the browser preference settings that can be reached
  with the <em>Configure Browsers...</em> link.</p>
  
  <h3>Manual Port Configuration</h3>
  <p>It is recommended to let the launcher dynamically choose a free port for 
  client-server communication. However if you would like to have full control 
  over the communication channel, you can explicitly specify a port number.
  </p>
  
  <h3>Session Timeout</h3>
  <p>Specifies the servlet session timeout in seconds. If the checkbox is 
  unselected, the session will never expire.
  </p>
  
  <h3>Context Path</h3>
  <p>
    A web application can be deployed with a context path. After deployment the web application 
    will be accessible using this path e.g. http://server:port/contextPath/webapp.
    To simulate this during development time you can use the option to specify a context path
    within the <em>Main</em> tab.
  </p>
  
  <h3>Client-side Log Level</h3>
  <p>
    <em>This option is outdated as of RAP 1.4.</em>
    It is only there to support earlier runtime versions of RAP.
  </p>
  <p>
    Since 1.4, the RAP client will fast-fail in case of an error but not write any log messages
    during normal operation anymore.
  </p>
  
  <h3>Client-side Library Variant</h3>
  <p>
    The JavaScript client of RAP can be delivered in two variants.
    The <em>Standard</em> version is optimized for speed and size by commpressing the JavaScript
    code.
    The <em>Debug</em> version maintains the JavaScript code in its original form.
    We recommend to use the Debug variant when developing custom widgets for RAP.
  </p>
    
  <h3>Instance Area</h3>
  <p>
    The instance area location sets the Program Arguments to define the
    <code><a href="/help/topic/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html">
    osgi.instance.area</a></code>. Bundles use this location to store their state location 
    data.</p>
    
  <p>
    To launch a once created launch configuration you may use the launch shortcut keys
    <code>Alt+Shift+X+R</code> (run) and <code>Alt+Shift+D+R</code> (debug).
  </p>
    
  <a name="equinox"><h2>Using the Equinox Launcher</h2></a>
  
  <p>
    To run the demo, select <em>Run &gt; Run...</em> from the main menu.
    In the upcoming Launch Configuration Dialog, select <em>Rich Ajax Platform Demo</em> from the
    section <em>Equinox OSGi Framework</em>.
  </p>
  
  <p>
    You may want to configure the TCP-port your demo application will listen to. 
    This is done opening the <em>Arguments</em> page and changing the 
    <code>-Dorg.osgi.service.http.port=9090</code> VM argument, to a (arbitrarily chosen) port your
    application will listen to.
    This is particularly important if the default port 9090 is already taken by some other
    application.
  </p>
    
  <img src="../../images/demo-app-params.png"/>
    
  <p>
    To actually start your application, click the <em>Run</em> button. 
    The correct startup should display in the Eclipse Console through a message saying
    <code style="color:red">INFO: Started SocketListener on 0.0.0.0:&lt;port&gt;</code>.
    If an error shows up, please make sure all other instances are stopped and then retry with
    another port.
  </p>
  
  <p>
    Now that the RAP application is running, you can access it using any 
    browser.
    Please enter the URL
    <code>http://localhost:&lt;port&gt;/rap?startup=&lt;entrypoint&gt;</code>.
    Where &lt;entrypoint&gt; specifies the name of the IEntryPoint implementation that you would
    like to start.
  <p>

</body>
</html>
