<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="copyright" content="Copyright (c) 2007-2008 Innoopract Informationssysteme GmbH. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page." >
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>RWT Theming</title>
<link rel="stylesheet" href="../style.css" charset="ISO-8859-1" type="text/css">
</head>
<body>

<h1>RWT Theming (CSS-based)</h1>

<p class="Note">
  This article describes the new CSS-based theming which is available since
  RAP 1.1M4.
  Developers are encouraged to use this way of theming now.
  The old property-based theming is still supported but considered deprecated.
  The old documentation is still available <a href="./theming-old.html">here</a>.
  <br/>
  This article is currently developing.
  You can always find the
  <a href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.rap/org.eclipse.rap.help/help/html/advanced/theming.html?root=Technology_Project&view=co">latest version</a>
  in the Eclipse CVS.
</p>

<p>
  This article describes the theming functionality of RWT, the RAP Widget Toolkit.
  This theming defines the default look and feel of the basic RWT controls like
  Shell, Button, Text etc.
  It must not be mixed up with the theming of the Eclipse workbench.
  Instead, it can be compared to the theming functionality of a desktop system
  that allows the user to set custom colors for title bars, text background and
  the like.
</p>

<h2>Introduction</h2>

<p>
  The RWT theming allows to define custom colors, fonts, borders, paddings,
  margins and images for RWT controls.
  However, which aspects are actually customizable depends on the particular
  control. Some controls allow for more flexibility, others are more hard-wired.
</p>
<p>
  Normally, a theme setting affects all instances of a control equally.
  Different presentation schemes for the same widget type can be defined
  using widget variants (see below).
</p>
<p>
  As an example, the difference between the default look and feel and a custom
  theme could look like this:
  <br/>
  <img src="../../images/theming-dialog.png"/>
</p>

<h2>How to Define a Custom RWT Theme</h2>

<h3>Create a Custom Theme File</h3>
<p>
  CSS theme files for RAP are valid
  <a href="http://www.w3.org/TR/CSS21/">CSS 2.1</a> files, except for a couple
  of non-standard properties and pseudo classes.
  The following is an example for a simple theme file:
  <pre>
  * {
    backgound-color: white;
  }

  Button[PUSH], Button[TOGGLE] {
    border: 2px solid blue;
    color: rgb( 17, 23, 103 );
    background-color: #f9f9f9;
  }

  Button[PUSH]:hover, Button[TOGGLE]:hover {
    background-color: white;
  }
  </pre>
  The first rule defines a background color for all elements.
  The second rule applies to Buttons with SWT style flags PUSH and TOGGLE and
  defines a border, a color, and a background color.
  The third rule defines a hover color for push-buttons and toggle-buttons.
</p>
<p>
  The <code>theme.css</code> file found in the demo project
  (<code>org.eclipse.rap.demo</code>) can serve as a more complex example.
</p>

<h3>Register the New Theme</h3>
<p>
  In order to make your theme available, you have to register it with the
  extension point <code>org.eclipse.rap.ui.themes</code>.
  In the <code>plugin.xml</code> of your application project, add an extension
  like this:
  <pre>
   &lt;extension
         point="org.eclipse.rap.ui.themes"&gt;
      &lt;theme
            id="my.application.aquablue"
            name="Aqua Blue Test Theme"
            file="aqua-blue.css" /&gt;
   &lt;/extension&gt;
  </pre>
</p>

<h3>Activate the Theme</h3>
<p>
  To make your application use the custom theme you have to register a branding
  as shown in the example below.
  For details, refer to the article on <a href="./branding.html">RAP branding</a>).
  <pre>
   &lt;extension
         point="org.eclipse.rap.ui.branding"&gt;
      &lt;branding
            id="my.application.aquabranding"
            servletName="aqua"
            defaultEntrypointId="my.application.entrypoint1"
            themeId="my.application.aquablue"&gt;
      &lt;/branding&gt;
   &lt;/extension&gt;
  </pre>
</p>
<p>
  For testing purposes, a custom theme can also be activated by passing the
  theme id in the URL parameter <code>theme</code> (e.g.
  <code>http://localhost:9090/rap?startup=controls&theme=my.application.aquablue</code>).
  There is no support for programmatic activation of custom themes yet.
</p>

<h2>Available Property Values</h2>
<p class="Note">
  The properties supported for every widget will be published here later,
  for now developers have to look into the <code>&lt;Widget&gt;.theme.xml</code>
  files in the RWT source code.
  Please note that as long as RAP still uses the old property system internally,
  not all properties specified in a CSS file are really interpreted.
</p>

<h2>Syntax for Property Values</h2>
<p>  
  Property values specified in a theme file must conform to the
  <a href="http://www.w3.org/TR/CSS21/">CSS 2.1 specification</a>
  with the following restrictions:
  <ul>
    <li>The keyword <code>inherit</code> is not supported</li>
    <li>All length values must be in pixels, <code>px</code> is the only
        supported unit</li>
    <li>Percentage values are not supported</li>
    <li>Borders can only be specified using the shortcut property
        <code>border</code>, the properties <code>border-color</code>,
        <code>border-color</code> etc. are not supported</li>
    <li>Fonts can only be specified using the shortcut property
        <code>font</code>, the properties <code>font-family</code>,
        <code>font-weight</code> etc. are not supported</li>
    <li>Background colors and images can only be specified using the properties
        <code>background-color</code> and <code>background-image</code>
        respectively, in this case the shortcut property <code>background</code>
        is not supported</li>
  </ul>
</p>

<h2>Widget Variants</h2>
<p>
  RAP 1.1M3 introduced a new concept to allow for a more flexible theming,
  called widget variants.
  This allows to apply a style to certain widgets that differs from the
  style of other widgets of the same type.
  As an example, imagine an application that uses PUSH buttons in a special
  banner bar.
  These buttons should have a different font and text color than normal PUSH
  buttons.
</p>

<p>
  To implement this, the buttons in the bar are marked as belonging to a custom
  variant (say "mybutton") like so:
  <pre>
   button.setData( WidgetUtil.CUSTOM_VARIANT, "mybutton" )
  </pre>
  In the theme CSS file, these widget variants can be referred to using the
  class notation known from CSS for HTML:
  <pre>
   Button.mybutton {
     color: red;
   }
  </pre>
</p>

<h2>SWT System Colors</h2>
<p>
  The SWT system colors, as returned by <code>Display#getSystemColor()</code>,
  are also themeable.
  The following list indicates which theme parameters manipulate these colors:
</p>

<p>
  <table cellspacing="5">
    <tr>
      <th style="text-align:left">SWT System Color</th>
      <th style="text-align:left">Element</th>
      <th style="text-align:left">Property</th>
    </tr>
    <tr><td>SWT.COLOR_WIDGET_DARK_SHADOW</td><td>System</td><td>rwt-darkshadow-color</td></tr>
    <tr><td>SWT.COLOR_WIDGET_NORMAL_SHADOW</td><td>System</td><td>rwt-shadow-color</td></tr>
    <tr><td>SWT.COLOR_WIDGET_LIGHT_SHADOW</td><td>System</td><td>rwt-lightshadow-color</td></tr>
    <tr><td>SWT.COLOR_WIDGET_HIGHLIGHT_SHADOW</td><td>System</td><td>rwt-highlight-color</td></tr>
    <tr><td>SWT.COLOR_WIDGET_BACKGROUND</td><td>*</td><td>background-color</td></tr>
    <tr><td>SWT.COLOR_WIDGET_BORDER</td><td>System</td><td>rwt-thinborder-color</td></tr>
    <tr><td>SWT.COLOR_WIDGET_FOREGROUND</td><td>*</td><td>color</td></tr>
    <tr><td>SWT.COLOR_LIST_FOREGROUND</td><td>List</td><td>color</td></tr>
    <tr><td>SWT.COLOR_LIST_BACKGROUND</td><td>List</td><td>background-color</td></tr>
    <tr><td>SWT.COLOR_LIST_SELECTION</td><td>List-Item:selected</td><td>background-color</td></tr>
    <tr><td>SWT.COLOR_LIST_SELECTION_TEXT</td><td>List-Item:selected</td><td>color</td></tr>
    <tr><td>SWT.COLOR_INFO_FOREGROUND</td><td>Tooltip</td><td>color</td></tr>
    <tr><td>SWT.COLOR_INFO_BACKGROUND</td><td>Tooltip</td><td>background-color</td></tr>
    <tr><td>SWT.COLOR_TITLE_FOREGROUND</td><td>Shell-Titlebar</td><td>color</td></tr>
    <tr><td>SWT.COLOR_TITLE_BACKGROUND</td><td>Shell-Titlebar</td><td>background-color</td></tr>
    <tr><td>SWT.COLOR_TITLE_BACKGROUND_GRADIENT</td><td>Shell-Titlebar</td><td>background-gradient-color</td></tr>
    <tr><td>SWT.COLOR_TITLE_INACTIVE_FOREGROUND</td><td>Shell-Titlebar:inactive</td><td>color</td></tr>
    <tr><td>SWT.COLOR_TITLE_INACTIVE_BACKGROUND</td><td>Shell-Titlebar:inactive</td><td>background-color</td></tr>
    <tr><td>SWT.COLOR_TITLE_INACTIVE_BACKGROUND_GRADIENT</td><td>Shell-Titlebar:inactive</td><td>background-gradient-color</td></tr>
  </table>
</p>

</body>
